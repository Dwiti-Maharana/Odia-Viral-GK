<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odia-Viral GK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0f14; /* Main Background */
            color: #e0e0e0; /* Primary Text */
            overflow: hidden; /* Hide scrollbars due to bubbles */
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center content vertically */
            align-items: center; /* Center content horizontally */
        }

        /* Bubble Animation */
        .bubbles {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            filter: blur(2px);
        }

        .bubble {
            position: absolute;
            background: rgb(255, 255, 255); /* Primary Accent Cyan with opacity */
            border-radius: 50%;
            animation: bubble-up 15s infinite ease-in forwards;
            opacity: 0;
            filter: blur(2px);
        }

        .bubble:nth-child(1) { width: 40px; height: 40px; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .bubble:nth-child(2) { width: 60px; height: 60px; left: 20%; animation-duration: 15s; animation-delay: 1s; }
        .bubble:nth-child(3) { width: 30px; height: 30px; left: 25%; animation-duration: 10s; animation-delay: 2s; }
        .bubble:nth-child(4) { width: 70px; height: 70px; left: 40%; animation-duration: 18s; animation-delay: 0.5s; }
        .bubble:nth-child(5) { width: 50px; height: 50px; left: 55%; animation-duration: 13s; animation-delay: 2.5s; }
        .bubble:nth-child(6) { width: 80px; height: 80px; left: 70%; animation-duration: 16s; animation-delay: 1.5s; }
        .bubble:nth-child(7) { width: 45px; height: 45px; left: 80%; animation-duration: 11s; animation-delay: 3s; }
        .bubble:nth-child(8) { width: 65px; height: 65px; left: 90%; animation-duration: 14s; animation-delay: 0s; }
        .bubble:nth-child(9) { width: 35px; height: 35px; left: 5%; animation-duration: 9s; animation-delay: 4s; }
        .bubble:nth-child(10) { width: 75px; height: 75px; left: 30%; animation-duration: 20s; animation-delay: 3.5s; }
        .bubble:nth-child(11) { width: 40px; height: 40px; left: 30%; animation-duration: 20s; animation-delay: 3.5s; }
        .bubble:nth-child(12) { width: 30px; height: 30px; left: 25%; animation-duration: 10s; animation-delay: 2s; }
        .bubble:nth-child(13) { width: 40px; height: 40px; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .bubble:nth-child(14) { width: 70px; height: 70px; left: 40%; animation-duration: 18s; animation-delay: 0.5s; }
        .bubble:nth-child(1) { width: 48px; height: 48px; left: 8%; animation-duration: 13s; animation-delay: 0s; }
        .bubble:nth-child(2) { width: 62px; height: 62px; left: 18%; animation-duration: 16s; animation-delay: 1.2s; }
        .bubble:nth-child(3) { width: 36px; height: 36px; left: 27%; animation-duration: 11s; animation-delay: 2.4s; }
        .bubble:nth-child(4) { width: 68px; height: 68px; left: 39%; animation-duration: 17s; animation-delay: 0.7s; }
        .bubble:nth-child(5) { width: 52px; height: 52px; left: 53%; animation-duration: 14s; animation-delay: 2.9s; }
        .bubble:nth-child(6) { width: 78px; height: 78px; left: 68%; animation-duration: 15s; animation-delay: 1.4s; }
        .bubble:nth-child(7) { width: 42px; height: 42px; left: 76%; animation-duration: 10s; animation-delay: 2.1s; }
        .bubble:nth-child(8) { width: 66px; height: 66px; left: 88%; animation-duration: 19s; animation-delay: 0.3s; }
        .bubble:nth-child(9) { width: 32px; height: 32px; left: 3%; animation-duration: 8s; animation-delay: 3.6s; }
        .bubble:nth-child(10) { width: 72px; height: 72px; left: 28%; animation-duration: 21s; animation-delay: 3.1s; }
        .bubble:nth-child(11) { width: 44px; height: 44px; left: 14%; animation-duration: 12s; animation-delay: 1.8s; }
        .bubble:nth-child(12) { width: 58px; height: 58px; left: 22%; animation-duration: 18s; animation-delay: 2.6s; }
        .bubble:nth-child(13) { width: 38px; height: 38px; left: 34%; animation-duration: 13s; animation-delay: 0.4s; }
        .bubble:nth-child(14) { width: 70px; height: 70px; left: 45%; animation-duration: 20s; animation-delay: 1.6s; }
        .bubble:nth-child(15) { width: 60px; height: 60px; left: 59%; animation-duration: 16s; animation-delay: 0.8s; }
        .bubble:nth-child(16) { width: 30px; height: 30px; left: 63%; animation-duration: 9s; animation-delay: 2.3s; }
        .bubble:nth-child(17) { width: 76px; height: 76px; left: 73%; animation-duration: 18s; animation-delay: 1s; }
        .bubble:nth-child(18) { width: 50px; height: 50px; left: 83%; animation-duration: 14s; animation-delay: 2.5s; }
        .bubble:nth-child(19) { width: 40px; height: 40px; left: 95%; animation-duration: 12s; animation-delay: 3.4s; }
        .bubble:nth-child(20) { width: 64px; height: 64px; left: 6%; animation-duration: 15s; animation-delay: 0.6s; }
        .bubble:nth-child(21) { width: 54px; height: 54px; left: 16%; animation-duration: 13s; animation-delay: 3.2s; }
        .bubble:nth-child(22) { width: 28px; height: 28px; left: 25%; animation-duration: 7s; animation-delay: 1.9s; }
        .bubble:nth-child(23) { width: 80px; height: 80px; left: 36%; animation-duration: 22s; animation-delay: 1.1s; }
        .bubble:nth-child(24) { width: 46px; height: 46px; left: 48%; animation-duration: 11s; animation-delay: 0.9s; }
        .bubble:nth-child(25) { width: 34px; height: 34px; left: 61%; animation-duration: 10s; animation-delay: 2.7s; }
        .bubble:nth-child(26) { width: 74px; height: 74px; left: 69%; animation-duration: 19s; animation-delay: 3.5s; }
        .bubble:nth-child(27) { width: 56px; height: 56px; left: 79%; animation-duration: 17s; animation-delay: 1.7s; }
        .bubble:nth-child(28) { width: 36px; height: 36px; left: 86%; animation-duration: 9s; animation-delay: 2.2s; }
        .bubble:nth-child(29) { width: 68px; height: 68px; left: 97%; animation-duration: 20s; animation-delay: 0.2s; }
        .bubble:nth-child(30) { width: 48px; height: 48px; left: 11%; animation-duration: 12s; animation-delay: 3.8s; }

        @keyframes bubble-up {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-50px) scale(1.2); opacity: 0; }
        }

        .quiz-container {
            background-color: #1c222d; /* Top Navbar / Normal Button Background */
            border-radius: 1rem;
            max-width: 1000px;
            width: 90%; /* Responsive width */
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: relative;
            z-index: 10;
            box-shadow: 0 0 10px rgba(66, 248, 245, 0.6); /* Initial glow */
            animation: glowing 1.8s infinite alternate; /* Apply glowing animation */
        }

        .question-box {
            background-color: #12151a;
            border: 1px solid #42f8f5;
            border-radius: 0.5rem;
            padding: 2rem; /* Adjusted padding */
            box-shadow: 0 0 10px rgba(66, 248, 245, 0.6);
            animation: glowing 1.8s infinite alternate;
        }

        .option-button {
            background-color: #12151a; /* Normal Button Background */
            color: #ffffff; /* Primary Text */
            border: 1px solid #42f8f5; /* Button Border Color */
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            text-align: left;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px rgba(66, 248, 245, 0.3); /* Glow Shadow */
            font-size: 1.8rem; /* text-lg */
            font-weight: 600; /* semibold */
            cursor: pointer; /* Indicate clickable */
        }

        .option-button:hover:not(.selected):not(.correct):not(.incorrect) {
            background-color: rgba(66, 248, 245, 0.2); /* Slight hover effect */
            box-shadow: 0 0 15px rgba(66, 248, 245, 0.6);
        }
        
        .option-button.correct {
            background-color: rgba(66, 248, 245, 0.6); /* Primary Accent Cyan for correct */
            box-shadow: 0 0 25px rgba(66, 248, 245, 1), 0 0 40px rgba(66, 248, 245, 0.8);
            animation: glowing 1.5s infinite alternate;
            color: #0d0f14; /* Black text for correct answer */
            font-weight: bolder; /* Bold text for correct answer */
        }

        @keyframes glowing {
            0% { box-shadow: 0 0 10px rgba(66, 248, 245, 0.6), 0 0 20px rgba(66, 248, 245, 0.4); }
            100% { box-shadow: 0 0 20px rgba(66, 248, 245, 1), 0 0 30px rgba(66, 248, 245, 0.8); }
        }

        @keyframes glowing-red {
            0% { box-shadow: 0 0 10px rgba(255, 0, 0, 0.6), 0 0 20px rgba(255, 0, 0, 0.4); }
            100% { box-shadow: 0 0 20px rgba(255, 0, 0, 1), 0 0 30px rgba(255, 0, 0, 0.8); }
        }

        .timer-display {
            font-size: 2.5rem; /* text-4xl */
            font-weight: bold;
            color: #42f8f5;
            text-shadow: 0 0 10px rgba(66, 248, 245, 0.6);
            min-width: 80px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #42f8f5;
            box-shadow: 0 0 15px rgba(66, 248, 245, 0.8);
            background-color: rgba(28, 34, 45, 0.8);
            cursor: pointer;
        }

        .timer-display.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        .main-button {
            background-color: #42f8f5; /* Primary Accent Cyan */
            color: #0d0f14; /* Main Background for text on accent */
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 10px rgba(66, 248, 245, 0.6);
            cursor: pointer;
        }

        .main-button:hover {
            background-color: #3ff7f3; /* Accent Shade Alt */
            box-shadow: 0 0 20px rgba(66, 248, 245, 0.8);
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1c222d;
            border: 2px solid #42f8f5;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 0 30px rgba(66, 248, 245, 0.8);
            z-index: 1000;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            color: #e0e0e0;
        }

        .message-box h3 {
            font-size: 1.5rem;
            color: #42f8f5;
        }

        .message-box button {
            background-color: #42f8f5;
            color: #0d0f14;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 10px rgba(66, 248, 245, 0.6);
            cursor: pointer;
        }

        .message-box button:hover {
            background-color: #3ff7f3;
            box-shadow: 0 0 20px rgba(66, 248, 245, 0.8);
        }

    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble glow"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble glow"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble glow"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <div class="quiz-container">
        <!-- MODIFIED: Top bar now contains all header elements -->
        <div class="flex justify-between items-center w-full">
            <!-- Left Item -->
            <div class="text-2xl sm:text-3xl font-bold text-white">Odia-Viral GK</div>
            
            <!-- Center Items -->
            <div class="flex items-center gap-4">
                <div id="timer" class="timer-display">5</div>
                <button id="next-button" class="text-2xl sm:text-2xl font-bold main-button px-6 py-3 text-lg" disabled>ପରବର୍ତ୍ତୀ ପ୍ରଶ୍ନ</button>
            </div>

            <!-- Right Item -->
            <div id="question-number" class="text-xl sm:text-2xl font-bold text-white">Question 1/20</div>
        </div>
        
        <div class="question-box">
            <!-- MODIFIED: Increased text size for the question -->
            <div id="question-text" class="text-2xl sm:text-5xl font-bold text-white leading-relaxed text-center">
                </div>
        </div>

        <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <!-- Options will be generated by JS here -->
        </div>

        <!-- REMOVED: The old bottom container for timer and next button is no longer needed -->
    </div>

    <div id="message-box" class="message-box">
        <h3 id="message-title"></h3>
        <p id="message-text"></p>
        <button id="message-button">OK</button>
    </div>

    <audio id="timerSound" src="5sec.mp3" preload="auto"></audio>
    <audio id="correctSound" src="correct.mp3" preload="auto"></audio>
    <audio id="clickSound" src="click.mp3" preload="auto"></audio>
    <audio id="backgroundMusic" src="background.mp3" preload="auto" loop></audio>


    <script>
        // Quiz data parsed from the provided text
        const quizData = [
            {
                question: "ଓଡ଼ିଶାର 'ଜୀବନ୍ତ ଜୀବାଶ୍ମ' କାହାକୁ କୁହାଯାଏ?",
                options: ["ଅଲିଭ୍ ରିଡଲେ", "ଇରୱାଡ଼ି ଡଲଫିନ୍", "ଅଶ୍ୱଖୁରା କଙ୍କଡା", "ଲାଲ କଙ୍କଡା"],
                answer: "ଅଶ୍ୱଖୁରା କଙ୍କଡା"
            },
            {
                question: "ଧନୁଯାତ୍ରାର ଗିନିଜ୍ ରେକର୍ଡର କାରଣ କ'ଣ?",
                options: ["ସର୍ବାଧିକ ଅଭିନେତା", "ସବୁଠାରୁ ପୁରୁଣା ଯାତ୍ରା", "ବୃହତ୍ତମ ମୁକ୍ତାକାଶ ରଙ୍ଗମଞ୍ଚ", "ସର୍ବାଧିକ ଦିନର ଯାତ୍ରା"],
                answer: "ବୃହତ୍ତମ ମୁକ୍ତାକାଶ ରଙ୍ଗମଞ୍ଚ"
            },
            {
                question: "କୋଣାର୍କ ମନ୍ଦିରରେ କେଉଁ ଧାତୁର ବିମ୍ ବ୍ୟବହୃତ ହୋଇଥିଲା?",
                options: ["ତମ୍ବା", "ଲୁହା", "ସୁନା", "ପିତ୍ତଳ"],
                answer: "ଲୁହା"
            },
            {
                question: "ଓଡ଼ିଆ ଲିପିର ଗୋଲାକାର ଶୈଳୀର କାରଣ କ'ଣ?",
                options: ["ସୁନ୍ଦରତା", "ଶୀଘ୍ର ଲେଖିବା", "ତାଳପତ୍ରର ସୁରକ୍ଷା", "ଦେବନାଗରୀରୁ ଅଲଗା"],
                answer: "ତାଳପତ୍ରର ସୁରକ୍ଷା"
            },
            {
                question: "ଚିଲିକାର ବର୍ଷାଦିନିଆ ପକ୍ଷୀ ଅଭୟାରଣ୍ୟ କେଉଁଟି?",
                options: ["ସାତପଡ଼ା", "କାଳିଜାଈ", "ପାରିକୁଦ", "ନଳବଣ"],
                answer: "ନଳବଣ"
            },
            {
                question: "ଦେବ୍ରିଗଡ଼ ଅଭୟାରଣ୍ୟ କେଉଁ ସଂଗ୍ରାମୀଙ୍କ ଆଶ୍ରୟସ୍ଥଳୀ ଥିଲା?",
                options: ["ବକ୍ସି ଜଗବନ୍ଧୁ", "ବୀର ସୁରେନ୍ଦ୍ର ସାଏ", "ଲକ୍ଷ୍ମଣ ନାୟକ", "ଚକରା ବିଷୋୟୀ"],
                answer: "ବୀର ସୁରେନ୍ଦ୍ର ସାଏ"
            },
            {
                question: "ଓଡ଼ିଶାର କେଉଁ ମନ୍ଦିରର ଛାତ ନାହିଁ?",
                options: ["ଲିଙ୍ଗରାଜ", "ରାଜାରାଣୀ", "ଚଉଷଠି ଯୋଗିନୀ", "ମୁକ୍ତେଶ୍ୱର"],
                answer: "ଚଉଷଠି ଯୋଗିନୀ"
            },
            {
                question: "'ପୂର୍ଣ୍ଣଚନ୍ଦ୍ର ଓଡ଼ିଆ ଭାଷାକୋଷ'ର ସ୍ରଷ୍ଟା କିଏ?",
                options: ["ଫକୀର ମୋହନ", "ଗୋପବନ୍ଧୁ ଦାସ", "ଗୋପାଳ ପ୍ରହରାଜ", "ମଧୁସୂଦନ ରାଓ"],
                answer: "ଗୋପାଳ ପ୍ରହରାଜ"
            },
            {
                question: "କେଉଁ ନୃତ୍ୟରେ କଳାକାର ମୁଖା ପିନ୍ଧନ୍ତି ନାହିଁ?",
                options: ["ପୁରୁଲିଆ ଛଉ", "ସଢେଇକଳା ଛଉ", "ମୟୂରଭଞ୍ଜ ଛଉ", "ରାବଣ ଛାୟା"],
                answer: "ମୟୂରଭଞ୍ଜ ଛଉ"
            },
            {
                question: "ଘଟଗାଁ ତାରିଣୀଙ୍କ ମୁଖ୍ୟ ଭୋଗ କ'ଣ?",
                options: ["ଛେନାପୋଡ଼", "ଖେଚୁଡ଼ି", "ରସଗୋଲା", "ନଡ଼ିଆ"],
                answer: "ନଡ଼ିଆ"
            },
            {
                question: "'ହ୍ୱିଲର୍ ଦ୍ଵୀପ'ର ବର୍ତ୍ତମାନ ନାମ କ'ଣ?",
                options: ["ସୁଭାଷ ଦ୍ଵୀପ", "କଲାମ ଦ୍ଵୀପ", "ନେହେରୁ ଦ୍ଵୀପ", "ବିଜୁ ଦ୍ଵୀପ"],
                answer: "କଲାମ ଦ୍ଵୀପ"
            },
            {
                question: "କଟକର ତାରକସି କାମ ପାଇଁ କେଉଁ ଧାତୁ ବ୍ୟବହୃତ ହୁଏ?",
                options: ["ସୁନା", "ପ୍ଲାଟିନମ୍", "ରୂପା", "ତମ୍ବା"],
                answer: "ରୂପା"
            },
            {
                question: "ଓଡ଼ିଶାର କେଉଁ ଉତ୍ପାଦକୁ GI ମାନ୍ୟତା ମିଳିଛି?",
                options: ["କୋରାପୁଟ କଫି", "କନ୍ଧମାଳ ହଳଦୀ", "ନୟାଗଡ଼ ଚିନି", "ବାଲେଶ୍ୱର ଚିଙ୍ଗୁଡ଼ି"],
                answer: "କନ୍ଧମାଳ ହଳଦୀ"
            },
            {
                question: "'ମାଟିମଟାଳ' ପାଇଁ ଜ୍ଞାନପୀଠ କିଏ ପାଇଥିଲେ?",
                options: ["ସୀତାକାନ୍ତ ମହାପାତ୍ର", "ସଚ୍ଚି ରାଉତରାୟ", "ପ୍ରତିଭା ରାୟ", "ଗୋପୀନାଥ ମହାନ୍ତି"],
                answer: "ଗୋପୀନାଥ ମହାନ୍ତି"
            },
            {
                question: "ଡୁଡୁମା ଜଳପ୍ରପାତ କେଉଁ ନଦୀରୁ ସୃଷ୍ଟି?",
                options: ["ଇନ୍ଦ୍ରାବତୀ", "ଋଷିକୂଲ୍ୟା", "ବୈତରଣୀ", "ମାଛକୁଣ୍ଡ"],
                answer: "ମାଛକୁଣ୍ଡ"
            },
            {
                question: "ବାରବାଟୀ ଦୁର୍ଗର ଉଚ୍ଚ ପ୍ରାସାଦର ନାମ କ'ଣ ଥିଲା?",
                options: ["ଶିଶୁପାଳ ଗଡ", "ନବତଳ ପ୍ରାସାଦ", "ମେଘନାଦ ପାଚେରୀ", "ଲାଲ୍ ମହଲ"],
                answer: "ନବତଳ ପ୍ରାସାଦ"
            },
            {
                question: "ଜଗନ୍ନାଥଙ୍କ 'ପୋଡ଼ପିଠା'ର ଆଧୁନିକ ରୂପ କେଉଁଟି?",
                options: ["ଛେନାପୋଡ଼", "ଆରିସା", "ରସାବଳି", "କାକରା"],
                answer: "ଛେନାପୋଡ଼"
            },
            {
                question: "ତାଳପତ୍ରରେ କେଉଁଥିରେ ଲେଖାଯାଉଥିଲା?",
                options: ["କଲମ", "ତୂଳୀ", "ଖଡ଼ି", "ଲେଖନୀ"],
                answer: "ଲେଖନୀ"
            },
            {
                question: "ପାଇକ ବିଦ୍ରୋହର ମୁଖ୍ୟ ସ୍ମାରକୀ କେଉଁଠାରେ ଅଛି?",
                options: ["ଖୋର୍ଦ୍ଧା", "ବରୁଣେଇ", "ପୁରୀ", "କଟକ"],
                answer: "ବରୁଣେଇ"
            },
            {
                question: "କେଉଁ ପର୍ବକୁ ଓଡ଼ିଶାର 'କୃଷିଭିତ୍ତିକ ଗଣପର୍ବ' କୁହାଯାଏ?",
                options: ["ରଜ", "ଦୋଳ ପୂର୍ଣ୍ଣିମା", "ଦଶହରା", "ନୂଆଖାଇ"],
                answer: "ନୂଆଖାଇ"
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let timerCountdown; // Timer for the 5-second answer reveal
        const answerRevealTime = 5; // 5 seconds for answer reveal countdown
        let selectedOption = null;
        let backgroundMusicPlayed = false; // Flag to track if music has started

        const questionNumberElement = document.getElementById('question-number');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const timerElement = document.getElementById('timer');
        const nextButton = document.getElementById('next-button');
        const messageBox = document.getElementById('message-box');
        const messageTitle = document.getElementById('message-title');
        const messageText = document.getElementById('message-text');
        const messageButton = document.getElementById('message-button');

        // Audio elements
        const timerSound = document.getElementById('timerSound');
        const correctSound = document.getElementById('correctSound');
        const clickSound = document.getElementById('clickSound');
        const backgroundMusic = document.getElementById('backgroundMusic');

        // Function to attempt playing background music
        function playBackgroundMusic() {
            if (!backgroundMusicPlayed) {
                backgroundMusic.play().then(() => {
                    backgroundMusicPlayed = true;
                    console.log("Background music started playing.");
                }).catch(error => {
                    console.log("Background music autoplay prevented:", error);
                });
            }
        }

        function showMessageBox(title, message, onOk = null) {
            messageTitle.textContent = title;
            messageText.textContent = message;
            messageBox.style.display = 'flex';
            messageButton.onclick = () => {
                messageBox.style.display = 'none';
                if (onOk) onOk();
            };
        }

        // Function to start the 5-second answer reveal timer
        function startAnswerRevealTimer() {
            let timeLeft = answerRevealTime;
            timerElement.textContent = timeLeft;
            nextButton.disabled = true; // Disable next button during countdown

            timerCountdown = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerCountdown);
                    timerCountdown = null; // Reset timerCountdown to null
                    const currentQuestion = quizData[currentQuestionIndex];
                    revealAnswer(selectedOption ? selectedOption.textContent : null, currentQuestion.answer); // Reveal answer after timer finishes
                    nextButton.disabled = false; // Enable next button after answer is revealed
                    timerElement.classList.remove('disabled'); // Re-enable timer for next question
                }
            }, 1000);
        }

        function loadQuestion() {
            clearInterval(timerCountdown); // Clear any existing countdown
            timerCountdown = null; // Reset timerCountdown to null
            timerElement.textContent = answerRevealTime; // Reset timer display to 5
            selectedOption = null;
            nextButton.disabled = true;
            optionsContainer.innerHTML = ''; // Clear previous options
            timerElement.classList.remove('disabled'); // Ensure timer is enabled for new question

            if (currentQuestionIndex >= quizData.length) {
                showMessageBox("Quiz Completed!", `You scored ${score} out of ${quizData.length} questions.`, () => {
                    resetQuiz();
                });
                return;
            }

            const currentQuestion = quizData[currentQuestionIndex];
            questionNumberElement.textContent = `Question ${currentQuestionIndex + 1}/${quizData.length}`;
            questionTextElement.textContent = currentQuestion.question;

            // Define the labels for the options
            const optionLabels = ['A', 'B', 'C', 'D'];

            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                // Prepend the letter label to the option text
                button.textContent = `${optionLabels[index]}. ${option}`;
                // MODIFIED: Adding font-semibold via the class list from the style tag
                button.classList.add('option-button', 'w-full', 'block', 'text-left');
                // Pass only the original option text for comparison
                button.addEventListener('click', () => handleOptionClick(button, option, currentQuestion.answer));
                optionsContainer.appendChild(button);
                button.disabled = false; // Ensure options are enabled
            });
        }

        function handleOptionClick(clickedButton, selectedAnswerOriginalText, correctAnswer) {
            // Play background music when any option is clicked for the first time
            playBackgroundMusic();

            if (selectedOption !== null) return; // Only allow one selection per question

            selectedOption = clickedButton;
            
            // Disable all options after selection
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
            });
            // Do NOT start timer here. User will click the timer to start.
        }


        function revealAnswer(selectedAnswerTextWithLabel, correctAnswerText) {
            const allOptionButtons = Array.from(optionsContainer.children);

            // Stop and reset timer sound when answer is revealed
            timerSound.pause();
            timerSound.currentTime = 0;

            allOptionButtons.forEach(button => {
                // Extract original text from button by removing the "X. " prefix
                const originalButtonText = button.textContent.substring(3);

                if (originalButtonText === correctAnswerText) {
                    button.classList.add('correct'); // Highlight correct answer
                    correctSound.play(); // Play correct answer sound
                } else if (selectedAnswerTextWithLabel && selectedAnswerTextWithLabel.substring(3) === originalButtonText && originalButtonText !== correctAnswerText) {
                    button.classList.add('incorrect'); // Highlight incorrect selected answer
                }
                button.disabled = true; // Ensure all buttons are disabled after reveal
            });

            // Score update only if an option was selected and it was correct
            if (selectedOption && selectedOption.textContent.substring(3) === correctAnswerText) {
                score++;
            }
        }

        timerElement.addEventListener('click', () => {
            // Prevent multiple clicks on timer for the same question or if answer is already revealed
            if (timerCountdown !== null || !nextButton.disabled) {
                return;
            }

            timerSound.play(); // Play timer sound
            startAnswerRevealTimer(); // Start the countdown
            timerElement.classList.add('disabled'); // Disable timer after click to prevent multiple clicks
        });


        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            clearInterval(timerCountdown); // Ensure timer is cleared on reset
            timerCountdown = null; // Reset timerCountdown to null
            loadQuestion();
        }

        nextButton.addEventListener('click', () => {
            clickSound.play(); // Play click sound
            currentQuestionIndex++;
            loadQuestion();
        });

        // Initial load
        window.onload = () => {
            loadQuestion();
        };

    </script>
</body>
</html>